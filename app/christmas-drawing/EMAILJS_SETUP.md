# EmailJS Setup Guide

This guide will help you set up EmailJS to automatically send gift assignments to each family member.

## Step 1: Create EmailJS Account

1. Go to [https://www.emailjs.com/](https://www.emailjs.com/)
2. Click **"Sign Up"** (free plan allows 200 emails/month)
3. Verify your email address

## Step 2: Add Email Service

1. In EmailJS Dashboard, click **"Email Services"**
2. Click **"Add New Service"**
3. Choose your email provider:
   - **Gmail** (recommended for personal use)
   - **Outlook/Office365**
   - **Yahoo**
   - Or use **Custom SMTP**

4. For Gmail:
   - Click **"Connect Account"**
   - Sign in with your Gmail
   - Allow EmailJS permissions
   - Give it a Service ID (e.g., `service_christmas`)
   - Click **"Create Service"**

5. **Copy the Service ID** - you'll need this later

## Step 3: Create Email Template

1. Click **"Email Templates"** in sidebar
2. Click **"Create New Template"**
3. **Template Name**: `Christmas Drawing Assignment`
4. **Template ID**: `template_christmas` (or any name you want)

5. **Edit the template:**

**Subject:**
```
üéÑ Your 2025 Christmas Gift Assignment!
```

**Content (HTML):**
```html
<p>Hey {{to_name}}! üëã</p>

<p>The Christmas drawing has been completed for <strong>{{year}}</strong>!</p>

<div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #28a745; margin: 20px 0;">
  <h2 style="margin-top: 0; color: #28a745;">üéÅ Your Assignment:</h2>
  <p style="font-size: 18px; margin-bottom: 0;">
    You will be giving a gift to: <strong style="color: #dc3545;">{{receiver}}</strong>
  </p>
</div>

<p><strong>Important Notes:</strong></p>
<ul>
  <li>Keep this assignment secret! ü§´</li>
  <li>Gift budget: $50 (or whatever you agreed on)</li>
  <li>Gift exchange date: [Add your date here]</li>
</ul>

<p style="margin-top: 30px; color: #6c757d; font-size: 14px;">
  Generated by the Boyce Family Christmas Drawing App<br>
  Questions? Contact Jordan!
</p>
```

6. Click **"Save"**
7. **Copy the Template ID**

## Step 4: Get Your Public Key

1. Click **"Account"** in sidebar
2. Click **"API Keys"** tab
3. Copy your **Public Key**

## Step 5: Update Configuration File

Edit `app/christmas-drawing/email-config.ts`:

```typescript
export const EMAIL_CONFIG = {
  serviceId: 'service_christmas',      // Your Service ID from Step 2
  templateId: 'template_christmas',    // Your Template ID from Step 3
  publicKey: 'YOUR_PUBLIC_KEY_HERE',   // Your Public Key from Step 4
};
```

## Step 6: Add Family Email Addresses

In the same file, update the email addresses:

```typescript
export const FAMILY_EMAILS: Record<string, string> = {
  "Nicole & Kevin": "nicole@example.com",      // Replace with actual email
  "Nathan & Alicia": "nathan@example.com",     // Replace with actual email
  "Brittany & Jose": "brittany@example.com",   // Replace with actual email
  "Jordan & Emily": "jordan@example.com",      // Replace with actual email
  "Chris & Stephanie": "chris@example.com",    // Replace with actual email
  "Zach & Jess": "zach@example.com",          // Replace with actual email
};
```

## Step 7: Test Email Sending

1. Start your dev server: `npm run dev`
2. Navigate to: `http://localhost:3000/christmas-drawing`
3. Login with **admin password**: `cyberlionadmin2025`
4. Generate a drawing (if not already done)
5. Click **"Send Emails to All"** button
6. Check your email inbox!

## How It Works

When you click "Send Emails to All":

1. The app loops through each family's assignment
2. Sends a personalized email to each family with:
   - Their name
   - Who they're giving to
   - The year
3. Uses EmailJS to send via your connected Gmail/email account
4. Each email is sent individually (not a group email)

## Email Template Variables

The template uses these variables:
- `{{to_name}}` - The family receiving the email (e.g., "Jordan & Emily")
- `{{receiver}}` - Who they're giving to (e.g., "Chris & Stephanie")
- `{{year}}` - The current year (e.g., "2025")

## Troubleshooting

### Emails not sending:

**Check EmailJS Dashboard:**
- Go to [EmailJS Dashboard](https://dashboard.emailjs.com/)
- Click "Logs" in sidebar
- See if requests are coming through and any error messages

**Common issues:**
- **Service not connected**: Reconnect your Gmail in Email Services
- **Template not saved**: Make sure template is saved with correct ID
- **Wrong credentials**: Double-check Service ID, Template ID, and Public Key
- **Free tier limit**: Free plan = 200 emails/month (plenty for this!)

### Gmail blocking:

If using Gmail:
- Make sure you connected via EmailJS (not SMTP)
- Check Gmail "Sent" folder to verify emails sent
- Check spam folder on receiving end

### Rate limiting:

EmailJS has rate limits:
- Free tier: 200 emails/month, 2 emails/second
- The app sends 6 emails (one per family), so well within limits

## Security Notes

- **Never commit email addresses to Git**: Add `email-config.ts` to `.gitignore`
- **Public Key is safe to expose**: It's meant to be public (in frontend code)
- **Private Key**: Never use the private key in frontend code
- **Service/Template IDs**: Safe to expose

## Cost

- **Free Tier**: 200 emails/month, forever free
- **Paid Plans**: Start at $7/month for 1000 emails
- For this app: **$0/month** (6 emails per year)

## Future Improvements

Ideas for enhancing email functionality:

1. **Email preview** before sending
2. **Test mode** - send to yourself first
3. **Confirmation emails** - notify admin when all sent
4. **Custom message** - add personal note from admin
5. **Send reminders** - remind families closer to gift exchange date

---

Happy emailing! üéÑüìß
